// hide_rows.js: Hide rows on the wgr614v5
// Copyright (C) 2011 Simon Weber <sweb090@gmail.com>
// Code published under GPLv2; see LICENSE file

function loadhelp2(fname, anchname, hide){
    var cells = document.getElementsByClassName("ttext");
    
    for(var i=0; i<cells.length; i++){
	var textCont = cells[i].textContent;

	if(containsAny(textCont, hide)){
	    var row = cells[i].parentNode.parentNode;
	    cells[i].parentNode.parentNode.parentNode.removeChild(row);
	    //Lame way to do this: restart the search after removing a row.
	    cells = document.getElementsByClassName("ttext");
	    i = 0;
	}
    }
	
    var num_cells = document.getElementsByClassName("thead");

    //Renumber the cells. Skip the first 4, which are the column headers.
    for(var i=4; i<num_cells.length; i++){
	num_cells[i].textContent = i-3;
    }

    //The original loadhelp code.
    if ((loadhelp.arguments.length == 1 ) || (anchname == "" ))
	top.helpframe.location.href=fname+"_h.htm";
    else
	top.helpframe.location.href=fname+"_h.htm#" + anchname;
}

//Return true if text contains any of the strings in check.
function containsAny(text, check){

    for(var i=0; i < check.length; i++){
	if(text.indexOf(check[i]) != -1){
	    return true;
	}
    }

    return false;
}